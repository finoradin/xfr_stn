<!DOCTYPE html>
<html>
  <head>
    <title>XFR STN Ingest Form</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="http://www.benfinoradin.info/xfr_stn/css/bootstrap.min.css" rel="stylesheet" media="screen">
        <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
      .wider{
      	width: 385px;
      }
      .fullwidth{
      	width: 100%;
      }

    </style>

<script type="text/javascript">
$(window).load(function () {
    $(function () {
        var defaults = {
            'usercomm': '-'
        };

        // separating set and remove
        // note that you could add "defaults" as an arg if you had different
        // defaults for different fieldsets
        var setDefaults = function (inputElements) {
            $(inputElements).each(function () {
                var d = defaults[this.name];
                if (d) {
                    // set with jQuery
                    // we don't need the data - just check on the class
                    $(this).val(d)
                        .addClass('default_value');
                }
            });
        };

        var removeDefaults = function (inputElements) {
            $(inputElements).each(function () {
                if ($(this).hasClass('default_value')) {
                    $(this).val('')
                        .removeClass('default_value');
                }
            });
        };

        setDefaults(jQuery('form[name=builder] input'));

        $("span.add").click(function () {
            // get the correct fieldset based on the current element
            var $fieldset = $(this).closest('fieldset');
            var $inputset = $('p', $fieldset)
                .first()
                .clone()
                .insertBefore($('p', $fieldset).last());
            // add a remove button
            $inputset.append('<span class="remove">Remove</span>');
            setDefaults($('input', $inputset));
            // return false; (only needed if this is a link)
        });

        // use delegate here to avoid adding new 
        // handlers for new elements
        $('fieldset').delegate("span.remove", {
            'click': function () {
                $(this).parent().remove();
            }
        });

        // Toggles 
        $('form[name=builder]').delegate('input', {
            'focus': function () {
                removeDefaults($(this));
            },
                'blur': function () {
                // switch to using .val() for consistency
                if (!$(this).val()) setDefaults(this);
            }
        });
    });

});

function printthis() {
    var ihcOut = '<xml>\n';
    $('fieldset').each(function () {
        if ($(this).find('.add').length > 0) return;
        var idNumber = $(this).find('#inputID').val();
        var title = $(this).find('#inputTitle').val();
        var creator = $(this).find('#inputCreator').val();
        var creationDate = $(this).find('#inputCreationDate').val();
        var documentType = $(this).find('#inputDocType').val();
        var totalRunningTime = $(this).find('#inputTRT').val();
        var formatType = $(this).find('#formattype').val();
        var description = $(this).find('#description').val();
        ihcOut +=
        '\t<idnumber>' + idNumber + '</idnumber>\n'
        + '\t<title>' + title + '</title>\n'
        + '\t<creator>' + creator + '</creator>\n'
        + '\t<creationdate>' + creationDate + '</creationdate>\n'
        + '\t<documenttype>' + documentType + '</documenttype>\n'
        + '\t<totalrunningtime>' + totalRunningTime + '<totalrunningtime>\n'
        + '\t<formattype>' + formatType + '</formattype>\n'
        + '\t<description>' + description + '</description>\n'
        + '</xml>';
    });
    $('#output').val(ihcOut);

}

function clearform() {
	$('#output').val('');
}

</script>


  </head>
  <body>
        <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">XFR STN</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Intake form</a></li>
              <li><a href="capture-log.html">Capture inventory</a></li>
              <li><a href="#contact">FAQ</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <h1>Intake Form</h1>
      <hr>

      <form class="form-horizontal" action="ajax/intake.php" method="post">

   		<div class="row">
   			<div class="span6">
   	 		 <fieldset>
   	 	
   	 		 	<div class="control-group">
			 		<label class="control-label" for="inputID">ID Number</label>
			 	 	<div class="controls">
			      		<input id="inputID" name="id_number" type="text" placeholder="E.g. XFR.5.23.4">
			 	 	</div>
			    </div>

			    <div class="control-group">
				    <label class="control-label" for="inputTitle">Title</label>
				    <div class="controls">
				    	<input id="inputTitle" name="title" type="text" placeholder="e.g. Best Video Ever">
			    	</div>
				</div>

				<div class="control-group">
			    	<label class="control-label" for="inputCreator">Creator</label>
			    	<div class="controls">
			    		<input id="inputCreator" name="creator" type="text" placeholder="e.g. Jane Doe">
			    	</div>
			    </div>

			    <div class="control-group">
			    	<label class="control-label" for="inputCreationDate">Creation Date</label>
			    	<div class="controls">
			    		<input id="inputCreationDate" type="text" placeholder="E.g. 1984">
		    		</div>
	    		</div>

	    		<div class="control-group">
			    	<label class="control-label" for="inputDocType">Document Type</label>
			    	<div class="controls">
			    		<input id="inputDocType" type="text" placeholder="E.g. ????">
		    		</div>
	    		</div>

				<div class="control-group">
					<label class="control-label" for="inputTRT">Total Running Time (est)</label>
					<div class="controls">
						<input id="inputTRT" type="text" placeholder="E.g. ????">
					</div>
				</div>

				<!-- Select Basic -->
				<div class="control-group">
				  <label class="control-label" for="formattype">Format Type</label>
				  <div class="controls">
				    <select id="formattype" name="formattype" class="input-large">
				      <option>3/4” UMatic</option>
				      <option>UMaticSP</option>
				      <option>VHS</option>
				      <option>S-VHS</option>
				      <option>3.5” Floppy</option>
				      <option>5.25” Floppy</option>
				      <option>Hard Drive</option>
				      <option>Zip Disk</option>
				      <option>Jazz Drive</option>
				    </select>
				  </div>
				</div>
				
	    	<textarea rows="6" id="description" class="wider" placeholder="Description"></textarea>
			
			<br><br>
	 		
	 		<button type="button" class="btn btn-danger" onclick="clearform()">Clear form</button>
	 		&nbsp;
	 		<button type="button" id="submit" class="btn btn-primary" onclick="printthis()">Generate XML</button>
	 		
	 		


			 </fieldset>
	     	</div>

	     <div class="span6">
	     	<label>XML Output (paste this into a textfile)</label>
			<textarea id="output" rows="22" class="fullwidth"></textarea>
			<br><br>
			<button type="submit" class="btn btn-success">Finished? Save to ingest log</button>
	     </div>
	     
</div> <!-- / end of row div -->
</form>
<hr>



    </div> <!-- /container --><script src="http://code.jquery.com/jquery.js"></script>
    <script src="http://www.benfinoradin.info/xfr_stn/js/bootstrap.min.js"></script>
    <script src="js/process_form.js"></script>
  </body>
</html>
